<!DOCTYPE html>
<html data-reactroot="" lang="en"><head><title>Joel Vandiver / Blog</title><meta charset="utf-8"/><meta http-equiv="X-UA-Compatible"/><link rel="shortcut icon" href="/assets/img/favicon.ico" type="image/x-icon"/><link rel="stylesheet" href="/assets/vendor/fontawesome-free/css/all.min.css"/><link rel="stylesheet" type="text/css" href="/assets/css/site.css"/></head><body class="container"><a class="sidebar" href="/"><h1>Joel Vandiver</h1><img src="/assets/fractal-logo.svg"/></a><div class="main"><h1><a name="Option" class="anchor" href="#Option">Option</a></h1>
<p>05-20-2019</p>
<p>Option values in F# provide the ability to decribe a value as either <code>Some</code> or <code>None</code>.  Typically, in imperative languages such as C#, <code>null</code> is used to convey the same meaning.  However, the use of <code>null</code> may also indicate other procedural meanings such as "incomplete" or "not yet".  This overloading of meaning creates ambiguity.</p>
<blockquote>
<p>Returning option values from functions requires the caller to handle the None case.</p>
</blockquote>
<table class="pre"><tr><td class="lines"><pre class="fssnip"><span class="l">1: </span>
<span class="l">2: </span>
<span class="l">3: </span>
<span class="l">4: </span>
<span class="l">5: </span>
<span class="l">6: </span>
</pre></td>
<td class="snippet"><pre class="fssnip highlighted"><code lang="fsharp"><span class="k">let</span> <span onmouseout="hideTip(event, '1', 1)" onmouseover="showTip(event, '1', 1)" class="fn">workOnOptionalValue</span> <span onmouseout="hideTip(event, '2', 2)" onmouseover="showTip(event, '2', 2)" class="id">data</span> <span class="o">=</span> 
    <span class="k">if</span> <span onmouseout="hideTip(event, '2', 3)" onmouseover="showTip(event, '2', 3)" class="id">data</span> <span class="o">=</span> <span class="s">&quot;Do Work&quot;</span> <span class="k">then</span> <span onmouseout="hideTip(event, '3', 4)" onmouseover="showTip(event, '3', 4)" class="uc">Some</span> <span class="s">&quot;Work was done.&quot;</span>
    <span class="k">else</span> <span onmouseout="hideTip(event, '4', 5)" onmouseover="showTip(event, '4', 5)" class="uc">None</span>

<span class="k">let</span> <span onmouseout="hideTip(event, '5', 6)" onmouseover="showTip(event, '5', 6)" class="id">workIsDone</span> <span class="o">=</span> <span onmouseout="hideTip(event, '1', 7)" onmouseover="showTip(event, '1', 7)" class="fn">workOnOptionalValue</span> <span class="s">&quot;Do Work&quot;</span>
<span class="k">let</span> <span onmouseout="hideTip(event, '6', 8)" onmouseover="showTip(event, '6', 8)" class="id">workIsNone</span> <span class="o">=</span> <span onmouseout="hideTip(event, '1', 9)" onmouseover="showTip(event, '1', 9)" class="fn">workOnOptionalValue</span> <span class="s">&quot;No work&quot;</span>
</code></pre></td>
</tr>
</table>
<blockquote>
<p>Returning null values does not require the caller to handle the null case.</p>
</blockquote>
<table class="pre"><tr><td class="lines"><pre class="fssnip"><span class="l">1: </span>
<span class="l">2: </span>
<span class="l">3: </span>
<span class="l">4: </span>
<span class="l">5: </span>
<span class="l">6: </span>
</pre></td>
<td class="snippet"><pre class="fssnip highlighted"><code lang="fsharp"><span class="k">let</span> <span onmouseout="hideTip(event, '7', 10)" onmouseover="showTip(event, '7', 10)" class="fn">workOnNullValue</span> <span onmouseout="hideTip(event, '2', 11)" onmouseover="showTip(event, '2', 11)" class="id">data</span> <span class="o">=</span> 
    <span class="k">if</span> <span onmouseout="hideTip(event, '2', 12)" onmouseover="showTip(event, '2', 12)" class="id">data</span> <span class="o">=</span> <span class="s">&quot;Do Work&quot;</span> <span class="k">then</span> <span class="s">&quot;Work was done.&quot;</span>
    <span class="k">else</span> <span class="k">null</span>

<span class="k">let</span> <span onmouseout="hideTip(event, '8', 13)" onmouseover="showTip(event, '8', 13)" class="id">workIsDoneAmbiguous</span> <span class="o">=</span> <span onmouseout="hideTip(event, '7', 14)" onmouseover="showTip(event, '7', 14)" class="fn">workOnNullValue</span> <span class="s">&quot;Do Work&quot;</span>
<span class="k">let</span> <span onmouseout="hideTip(event, '9', 15)" onmouseover="showTip(event, '9', 15)" class="id">workIsNullAmbiguous</span> <span class="o">=</span> <span onmouseout="hideTip(event, '7', 16)" onmouseover="showTip(event, '7', 16)" class="fn">workOnNullValue</span> <span class="s">&quot;No work&quot;</span>
</code></pre></td>
</tr>
</table>
<blockquote>
<p>Output:</p>
<table class="pre"><tr><td class="lines"><pre class="fssnip"><span class="l">1: </span>
<span class="l">2: </span>
<span class="l">3: </span>
</pre></td>
<td class="snippet"><pre class="fssnip highlighted"><code lang="fsharp"><span class="k">val</span> <span class="id">workOnNullValue</span> <span class="pn">:</span> <span class="id">data</span><span class="pn">:</span><span onmouseout="hideTip(event, '10', 17)" onmouseover="showTip(event, '10', 17)" class="id">string</span> <span class="k">-&gt;</span> <span onmouseout="hideTip(event, '10', 18)" onmouseover="showTip(event, '10', 18)" class="id">string</span>
<span class="k">val</span> <span class="id">workIsDoneAmbiguous</span> <span class="pn">:</span> <span onmouseout="hideTip(event, '10', 19)" onmouseover="showTip(event, '10', 19)" class="id">string</span> <span class="o">=</span> <span class="s">&quot;Work was done.&quot;</span>
<span class="k">val</span> <span class="id">workIsNullAmbiguous</span> <span class="pn">:</span> <span onmouseout="hideTip(event, '10', 20)" onmouseover="showTip(event, '10', 20)" class="id">string</span> <span class="o">=</span> <span class="k">null</span>
</code></pre></td>
</tr>
</table>
</blockquote>
<blockquote>
<p>A null reference exception will occur when the caller operates on a null value.</p>
</blockquote>
<table class="pre"><tr><td class="lines"><pre class="fssnip"><span class="l">1: </span>
</pre></td>
<td class="snippet"><pre class="fssnip highlighted"><code lang="fsharp"><span class="k">let</span> <span onmouseout="hideTip(event, '11', 21)" onmouseover="showTip(event, '11', 21)" class="id">willRaiseException</span> <span class="o">=</span> <span onmouseout="hideTip(event, '9', 22)" onmouseover="showTip(event, '9', 22)" class="id">workIsNullAmbiguous</span><span class="pn">.</span><span onmouseout="hideTip(event, '12', 23)" onmouseover="showTip(event, '12', 23)" class="id">Length</span> <span class="o">=</span> <span class="n">7</span>
</code></pre></td>
</tr>
</table>
<blockquote>
<p>Output:</p>
<table class="pre"><tr><td class="lines"><pre class="fssnip"><span class="l">1: </span>
<span class="l">2: </span>
<span class="l">3: </span>
</pre></td>
<td class="snippet"><pre class="fssnip highlighted"><code lang="fsharp"><span onmouseout="hideTip(event, '13', 24)" onmouseover="showTip(event, '13', 24)" class="id">System</span><span class="pn">.</span><span onmouseout="hideTip(event, '14', 25)" onmouseover="showTip(event, '14', 25)" class="id">NullReferenceException</span><span class="pn">:</span> <span class="id">Object</span> <span class="id">reference</span> <span onmouseout="hideTip(event, '15', 26)" onmouseover="showTip(event, '15', 26)" class="id">not</span> <span onmouseout="hideTip(event, '16', 27)" onmouseover="showTip(event, '16', 27)" class="id">set</span> <span class="k">to</span> <span class="id">an</span> <span class="id">instance</span> <span class="k">of</span> <span class="id">an</span> <span class="id">object</span><span class="pn">.</span>
   <span class="id">at</span> <span class="pn">&lt;</span><span class="id">StartupCode</span><span class="o">$</span><span class="id">FSI_0005</span><span class="pn">&gt;</span><span class="id">FSI_0005</span><span class="pn">.</span><span class="id">main</span><span class="id">@</span><span class="pn">(</span><span class="pn">)</span> <span class="k">in</span> <span class="id">c</span><span class="pn">:</span>
<span class="id">Stopped</span> <span class="id">due</span> <span class="k">to</span> <span class="id">error</span>
</code></pre></td>
</tr>
</table>
</blockquote>
<blockquote>
<p>Output:</p>
<table class="pre"><tr><td class="lines"><pre class="fssnip"><span class="l">1: </span>
<span class="l">2: </span>
<span class="l">3: </span>
</pre></td>
<td class="snippet"><pre class="fssnip highlighted"><code lang="fsharp"><span class="k">val</span> <span class="id">workOnOptionalValue</span> <span class="pn">:</span> <span class="id">data</span><span class="pn">:</span><span onmouseout="hideTip(event, '10', 28)" onmouseover="showTip(event, '10', 28)" class="id">string</span> <span class="k">-&gt;</span> <span onmouseout="hideTip(event, '10', 29)" onmouseover="showTip(event, '10', 29)" class="id">string</span> <span onmouseout="hideTip(event, '17', 30)" onmouseover="showTip(event, '17', 30)" class="id">option</span>
<span class="k">val</span> <span class="id">workIsDone</span> <span class="pn">:</span> <span onmouseout="hideTip(event, '10', 31)" onmouseover="showTip(event, '10', 31)" class="id">string</span> <span onmouseout="hideTip(event, '17', 32)" onmouseover="showTip(event, '17', 32)" class="id">option</span> <span class="o">=</span> <span onmouseout="hideTip(event, '3', 33)" onmouseover="showTip(event, '3', 33)" class="id">Some</span> <span class="s">&quot;Work was done.&quot;</span>
<span class="k">val</span> <span class="id">workIsNone</span> <span class="pn">:</span> <span onmouseout="hideTip(event, '10', 34)" onmouseover="showTip(event, '10', 34)" class="id">string</span> <span onmouseout="hideTip(event, '17', 35)" onmouseover="showTip(event, '17', 35)" class="id">option</span> <span class="o">=</span> <span onmouseout="hideTip(event, '4', 36)" onmouseover="showTip(event, '4', 36)" class="id">None</span>
</code></pre></td>
</tr>
</table>
</blockquote>
<p>Option values can be pattern matched to extract values.</p>
<script src="/assets/vendor/jquery/jquery.min.js"></script><script src="/assets/vendor/jquery-easing/jquery.easing.min.js"></script><script src="/assets/vendor/bootstrap/js/bootstrap.bundle.min.js"></script><script src="/assets/js/literate.js"></script></div></body></html>